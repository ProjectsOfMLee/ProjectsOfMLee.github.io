var e=require("@urql/core"),u=require("vue"),t=require("wonka");function r(){return(r=Object.assign||function(e){for(var u=1;u<arguments.length;u++){var t=arguments[u];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function n(t,r){var n;n=u.isRef(r)?r:u.ref(r instanceof e.Client?r:new e.Client(r)),t.provide("$urql",n)}function a(){return u.inject("$urql")}function o(e){return e&&u.isRef(e)?e.value:e}var i={flush:"pre"};function s(n,s,l){void 0===s&&(s=a()),void 0===l&&(l=[]);var f=u.reactive(n),v=u.ref(),c=u.ref(!1),p=u.ref(!1),h=u.ref(),x=u.ref(),d=u.ref(),y=u.isRef(n.pause)?n.pause:u.ref(!!n.pause),b=u.ref(e.createRequest(f.query,o(f.variables))),q=u.ref();l.push(u.watchEffect((function(){var u=e.createRequest(f.query,o(f.variables));b.value.key!==u.key&&(b.value=u)}),i)),l.push(u.watchEffect((function(){q.value=y.value?void 0:s.value.executeQuery(b.value,r({},{requestPolicy:f.requestPolicy},f.context))}),i));var w={data:v,stale:c,error:h,operation:x,extensions:d,fetching:p,isPaused:y,executeQuery:function(e){return q.value=s.value.executeQuery(b.value,r({},{requestPolicy:f.requestPolicy},f.context,e)),P},pause:function(){y.value=!0},resume:function(){y.value=!1}};l.push(u.watchEffect((function(e){q.value?(p.value=!0,c.value=!1,e(t.subscribe((function(e){v.value=e.data,c.value=!!e.stale,p.value=!1,h.value=e.error,x.value=e.operation,d.value=e.extensions}))(t.onEnd((function(){p.value=!1,c.value=!1}))(q.value)).unsubscribe)):(p.value=!1,c.value=!1)}),{flush:"sync"}));var P=r({},w,{then:function(e,u){return(q.value?t.toPromise(t.map((function(){return w}))(t.take(1)(q.value))):Promise.resolve(w)).then(e,u)}});return P}function l(r,n){void 0===n&&(n=a());var i=u.ref(),s=u.ref(!1),l=u.ref(!1),f=u.ref(),v=u.ref(),c=u.ref();return{data:i,stale:s,fetching:l,error:f,operation:v,extensions:c,executeMutation:function(u,a){return l.value=!0,t.toPromise(t.take(1)(n.value.executeMutation(e.createRequest(r,o(u)),a||{}))).then((function(e){return i.value=e.data,s.value=!!e.stale,l.value=!1,f.value=e.error,v.value=e.operation,c.value=e.extensions,e}))}}}var f={flush:"pre"};function v(n,i,s,l){void 0===s&&(s=a()),void 0===l&&(l=[]);var v=u.reactive(n),c=u.ref(),p=u.ref(!1),h=u.ref(!1),x=u.ref(),d=u.ref(),y=u.ref(),b=u.ref(i),q=u.isRef(n.pause)?n.pause:u.ref(!!n.pause),w=u.ref(e.createRequest(v.query,o(v.variables))),P=u.ref();l.push(u.watchEffect((function(){var u=e.createRequest(v.query,o(v.variables));w.value.key!==u.key&&(w.value=u)}),f)),l.push(u.watchEffect((function(){P.value=q.value?void 0:s.value.executeSubscription(w.value,r({},v.context))}),f)),l.push(u.watchEffect((function(e){P.value?(h.value=!0,e(t.subscribe((function(e){h.value=!0,c.value=void 0!==e.data&&"function"==typeof b.value?b.value(c.value,e.data):e.data,x.value=e.error,y.value=e.extensions,p.value=!!e.stale,d.value=e.operation}))(t.onEnd((function(){h.value=!1}))(P.value)).unsubscribe)):h.value=!1}),f));var R={data:c,stale:p,error:x,operation:d,extensions:y,fetching:h,isPaused:q,executeSubscription:function(e){return P.value=s.value.executeSubscription(w.value,r({},v.context,e)),R},pause:function(){q.value=!0},resume:function(){q.value=!1}};return R}exports.default=n,exports.install=n,exports.provideClient=function(t){var r;return r=u.isRef(t)?t:u.ref(t instanceof e.Client?t:new e.Client(t)),u.provide("$urql",r),r.value},exports.useClientHandle=function(){var e=a(),t=[];return u.onBeforeUnmount((function(){for(var e;e=t.shift();)e()})),{client:e.value,useQuery:function(u){return s(u,e,t)},useSubscription:function(u,r){return v(u,r,e,t)},useMutation:function(u){return l(u,e)}}},exports.useMutation=function(e){return l(e)},exports.useQuery=function(e){return s(e)},exports.useSubscription=function(e,u){return v(e,u)},Object.keys(e).forEach((function(u){"default"===u||exports.hasOwnProperty(u)||(exports[u]=e[u])}));
//# sourceMappingURL=urql-vue.min.js.map
